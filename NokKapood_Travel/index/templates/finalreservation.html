{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <script src="{% static 'js/jquery.min.js' %}"></script>
    <script src="{% static 'js/jquery-ui.min.js' %}"></script>
    <script src="{% static 'js/page_login.js' %}"></script>   
    <script src="{% static 'js/index.js' %}"></script> 
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nokkapood</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter%3A500%2C600%2C700"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro%3A500%2C600%2C700"/>
    <!-- <link rel="stylesheet" href="static/css/page_login.css"/> -->
    <link rel='stylesheet' href="{% static 'css/finalreservation.css' %}">
</head>
<body>
    <header>
        <a href="{% url 'page_login' %}">
        <div class="logo"> 
            <img class="nk" src="https://cdn.discordapp.com/attachments/698939910131941466/1178496270520823931/nokkapood-travel.png?ex=65765b2e&is=6563e62e&hm=1299f63426dc58460a9f61cdaa3c2023d3872b5295ee0408aefa2d01ef055d7a&" alt="">
        </div>
        </a>
        <nav class="navigation">
            <form action="{% url 'finalreservation' %}" method="post">
                    {% csrf_token %}

                    <button class="register" type="submit">My Booking</a></button>
            </form>

                    <button class="login" type="submit">User: {{user.username}}</a></button>
        </nav>
    </header>
        <div class='bg'>
                <ul>
                    {% for ticket in tickets %}
                        {% for flight in flights %}
                            {% for passenger in passengers %}
                              {% for seat in seats %}
                                {% if ticket.username == user.username and flight.flight_no == ticket.flight_id and ticket.ticket_id == passenger.ticket_id.ticket_id and ticket.seat_class == seat.seat_class and seat.flight_id == ticket.flight_id %}
                                        <li class='space'>
                                            <div class='base'>    
                                                <h1 class='h1'>Reservation Details</h1>
                                                <div class='line'></div>
                                                <div class='sub'>
                                                    <div class="border1">
                                                        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAA51JREFUWEftl02IXEUQx//V3dVDMBqJSBT8uMUcVgnEW1wSQvw4CCJI/DbqQTQharIHUQRBCIiIIoheFPxAicaDByPiRQ9BEEE0QSIKBmcwJOagkcDudL3pkh7ehNm3b+b1TnZlQfs2U9X/+r3qrnr1CCts0Qrjwf9ATSfy382QAqvBvAEiRwgIozL1r2RInbshEn0G4EIQnYwx3sNF8WUd1LIDiXPbDNGnAFYNAcwaok0UwrEq1LICiXM3GqJDAHhBNoietyE8lwUkzm03ROs1xrY1pgORNgF/NlXIsL3w/jZS/RiAq92n+rQtihcagQrv7yLV92qEzgJoE1FHVdtQ7ShRW1U7zto2ut0E3b+shfe3k+pHI2GA40ZkIwF/jwVSwEbmlwA8BqC1mIyUvqcVOE7A9QDMiMycMM5N09zcr9mXWoFLo/f7oLoLwEUTgNVvUf3dOLeZ5uZ+m6jsFVgTnXscRE8AuOS8wDJgkn5WlSlwQXTuURgzA9XLFw2WCZMNNABQoBWZHwLwDIArc8GUaIcL4WCOf1aGqkLp8veY7yPgVQBrMgLttiKvZ/jlHVmdUI85VWJWEBC9aEN4atmACuaHCXgrJ0Dpc8CK3J3jv+gjK2HezC2IBKHA105k80RAmirP+ymEcIyAYt7rgPl+At7NEa74tK3I1Tn75mVIAReZ3wewA4AAOALgBwDfl533lTGZ+UuJHiHVD2t8ohFpVR+wsVP3mN8B8EDOk1R8zhhgG4l812M+AODOqoZx7iqane00aVcztCoy7wSQOvOGps2l/RxM/754PxVVjy4AUp2mojjcpDnyUotzt1hjnlTVm8Yc01kDbEmZGQ4Uvf9cVW8e/k+J7nUhfDAx0Lnu3GpdE2PcWx7l8NSXYLaTyDfVIOLcVkM0f0QdMf9U92aXfVGpMAUOO5HpUU9cMH9bjiEDlzesSJoexq5soLICTwFYWyrOGpHVBMS6COXE+MnARkSHTAi3LhlQEup5vx+q6cXaX4ZoikL4sS5I6meR+ScA60v7USty3ZICKbAuMp8YTIMKPOhEUquoXQXzTgLeLo1nrMjFSwqUxKJzB5XojlL4NSuyZ1SQ8pjTqJpGlT+MyGXUf5OMXtl3aCChzm2JRF/1f6vO2KJ4eVyAHnMCftYYM03d7s9LnqH+XWJOje8LKzLTFEDTB2KrdQV1u780+Sb7ojPUT4z311IIC7pxTsAmn4mAmkTPx77igP4B4FZGNFPHJXcAAAAASUVORK5CYII="/>
                                                        <p class='l1'>Booking ID: {{ ticket.ticket_id }}</p>
                                                        <p class='l2'>Booking Date: {{ ticket.booking_date|date:"Y-m-d" }}</p> 
                                                    </div>
                                                    <div class='line1'></div>
                                                    <div class='border2'>
                                                        <p class='l3'>{{ flight.departure_airport }}-{{ flight.arrival_airport }}</p>
                                                        <p class='total-amount'>฿ {{ ticket.total_amount }}</p>
                                                    </div>
                                                    
                                                    <div class='border3'>
                                                        <p>เที่ยวบิน</p>
                                                        <p>เวลาออกเดินทาง</p>
                                                        <p>เวลาเดินทางถึง</p>
                                                    </div>
                                                    <div class='border4'>
                                                        <p>{{ flight.flight_no  }}</p>
                                                        <p>{{ flight.departure_date }} {{ flight.departure_time }}</p>
                                                        <p class='tt'>{{ flight.arrival_date }} {{ flight.arrival_time }}</p> 
                                                    </div>
                                            
                                                    <div class='border5'>
                                                        <p>ผู้โดยสาร</p>
                                                        <p>เลขที่นั่ง</p>
                                                        <p class = 'tt4'>สถานะ</p>
                                                    </div>
                                            
                                                    <div class='border6'>
                                                        <p>{{ passenger.first_name }} {{ passenger.last_name }}</p>
                                                        <p class='tt5'>{{ seat.seat_id }}</p>
                                                        <p class='tt1'>{{ ticket.status }}</p>
                                                    </div>

                                                    <div class='border7'>
                                                        {% if ticket.status == 'PENDING' %}
                                                        <form action="{% url 'cancel_reservation' %}" method="POST">
                                                            {% csrf_token %} 
                                                            <input type="hidden" name="ticket_id" value="{{ ticket.ticket_id }}">
                                                            <button type="submit" class="btn btnCancel">ยกเลิก</button>
                                                        </form>
                                                        <form action="{% url 'payment2' %}" method="POST" class="tt3">
                                                            {% csrf_token %} 
                                                            <input type="hidden" name="ticket_id" value="{{ ticket.ticket_id }}">
                                                            <input type="hidden" name="total_amount" value="{{ ticket.total_amount }}">
                                                            <input type="hidden" name="status" value="{{ ticket.status }}">
                                                            <button type="submit" class="btn">ชำระ</button>
                                                        </form>
                    
                                                    
                                                        {% endif %}
                                                    </div>
                                                    
                                                </div>
                                            </div>
                                        </li>                  
                                    
                                {% endif %}
                              {% endfor %}
                            {% endfor %}
                        {% endfor %}
                    {% endfor %}
                </ul>
            </div>    
        </div>
    </div>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap');
        
                *{
                    margin: 0;
                    padding: 0;
                    box-sizing: border-box;
                    font-family: 'Poppins', sans-serif;
                }
        
                header {
                    position: fixed;
                    top: 0rem;
                    left: 0rem;
                    width: 100%;
                    padding: 20px 100px 20px;
                    background: rgba(200, 139, 142, 0.6999999881);
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    z-index: 99;
                }
        
                lable.nkt {
                    display: flex;
                    font-size: 2.5rem;
                    word-wrap: break-word;
                    width: 18.75rem;
                    height: auto;
                    margin-left: -35rem;
                    margin-top: 0.438;
                    color: white;
                }
                
                html {
                    font-size: 62.5%;
                }
                
                * {
                    margin: 0;
                    padding: 0;
                    box-sizing: border-box;
                }
                
                ul, li {
                    list-style: none;
                }
                
                input {
                    border: none;
                }
                
                body {
                    width: 100%;
                }
                .space {
                 margin-top: 15%;
                }
                
                .bg {
                    margin-top:6%;
                    width: 100%;
                    height: 100vh;
                    flex-shrink: 0;
                    border-radius: 20px;
                    background: #EAEAEA;
                    overflow: auto;
                }
                
                .base {
                    width: 90%;
                    max-width: 900px;
                    height: 500px;
                    background: #FFF;
                    border-radius: 10px;
                    margin: 0 auto;
                    position: relative;
                    transform: translateY(-50%);
                    display: flex;
                    flex-direction: column;
                    
                }
                
                
                
                .h1{
                  width: 219px;
                  height: 43px;
                  flex-shrink: 0;
                  color: #000;
                  font-family: Inter;
                  font-size: 30px;
                  font-style: normal;
                  font-weight: 600;
                  line-height: normal;
                  white-space: nowrap;
                  margin-left: 4%; 
                }
                
                .line {
                  width: 825px;
                  height: 1px;
                  background: #D9D9D9;
                  margin-left: 4%; 
                }
                
                .sub {
                  width: 825px;
                  height: 402px;
                  margin-top: 3%;
                  margin-left: 4%;
                  flex-shrink: 0;
                  border: 1px solid rgba(0, 0, 0, 0.50);
                  background: #FFF;
                  mix-blend-mode: darken;
                  box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.25), 0px 4px 4px 0px rgba(0, 0, 0, 0.25), 0px 4px 4px 0px rgba(0, 0, 0, 0.25), 0px 4px 4px 0px rgba(0, 0, 0, 0.25);
                  text-align: center;
                }
                
                .plane{
                  margin-left: 5%;
                  margin-bottom: 10%;
                }
                
                .border1 {
                  display: flex;
                  margin-left: 5%;
                  margin-top: 3%;
                  
                }
                
                .l1{
                  width: 267px;
                  height: 13px;
                  margin-top: 1%;
                  flex-shrink: 0;
                  color: #000;
                  font-family: Inter;
                  font-size: 20px;
                  font-style: normal;
                  font-weight: 500;
                  line-height: normal;
                  white-space: nowrap;
                  
                }
                
                .l2{
                  width: 267px;
                  height: 13px;
                  margin-top: 1%;
                  flex-shrink: 0;
                  color: #000;
                  font-family: Inter;
                  font-size: 20px;
                  font-style: normal;
                  font-weight: 500;
                  line-height: normal;
                  white-space: nowrap;
                  padding-left: 170px;
                }
                
                .border2 {
                  display: flex;
                  margin-left: 5%;
                  margin-top: 3%;
                }
                
                .l3 {
                  width: 267px;
                  height: 13px;
                  margin-top: 1%;
                  flex-shrink: 0;
                  color: #000;
                  font-family: Inter;
                  font-size: 20px;
                  font-style: normal;
                  font-weight: 500;
                  line-height: normal;
                  white-space: nowrap;
                  padding-left: 50px;
                }
                
                .total-amount {
                  width: 267px;
                  height: 13px;
                  flex-shrink: 0;
                  color: red;
                  font-weight: 1000;
                  margin-left: auto; /* This will push it to the right */
                  font-size: 32px;
                }
                
                
                .l4{
                  width: 267px;
                  height: 13px;
                  margin-top: 1.5%;
                  flex-shrink: 0;
                  color: #F00;
                  font-family: Inter;
                  font-size: 20px;
                  font-style: normal;
                  font-weight: 500;
                  line-height: normal;
                  white-space: nowrap;
                  padding-left: 50px;
                }
                .border3 {
                  display: flex;
                  flex-direction: row;
                  gap: 150px;
                  margin-top: 3%;
                  padding-left: 133px;
                  padding-top: 10px;
                }
                
                .border3 p {
                  height: 27px;
                  flex-shrink: 0;
                  color: #90989F;
                  font-family: Inter;
                  font-size: 15px;
                  font-style: normal;
                  font-weight: 500;
                  line-height: normal;
                  white-space: nowrap;
                }
                
                .border4 {
                  display: flex;
                  flex-direction: row;
                  gap: 150px;
                  margin-top: 1.5%;
                  padding-left: 133px;
                  padding-top: 10px;
                  color: #000;
                  font-family: Inter;
                  font-size: 20px;
                  font-style: normal;
                  font-weight: 500;
                  line-height: normal;
                }
                
                .border4 p {
                  height: 13px;
                  flex-shrink: 0;
                  color: #000000;
                  font-size: 15px;
                  white-space: nowrap;
                }
                
                .tt {
                  margin-left: -5%; /* Adjust the negative value based on your preference */
                }
                
                
                .border5 {
                    display: flex;
                    flex-direction: row;
                    gap: 150px;
                    margin-top: 3%;
                    padding-left: 133px;
                    padding-top: 10px;
                }
                
                .border5 p {
                    height: 27px;
                    flex-shrink: 0;
                    color: #90989F;
                    font-family: Inter;
                    font-size: 15px;
                    font-style: normal;
                    font-weight: 500;
                    line-height: normal;
                    white-space: nowrap;
                }
                
                .tt4 {
                    margin-left: 7%;
                }
                
                .border6 {
                    display: flex;
                    flex-direction: row;
                    margin-top: 1.5%;
                    color: #000;
                    font-family: Inter;
                    font-size: 20px;
                    font-style: normal;
                    font-weight: 500;
                    line-height: normal;
                }
                
                .border6 p {
                    height: 13px;
                    flex-shrink: 0;
                    color: #000000;
                    font-size: 15px;
                    white-space: nowrap;
                }
                
                .border6 .tt5 {
                    padding-right: 160px;
                }
                
                
                .border7 {
                  display: flex;
                  align-items: center;
                  margin-left: 70%;
                  margin-top: 5%;
                }
                
                
                .tt3 {
                  margin-left: 10%;
                  /* Adjust the negative value based on your preference */
                }
                
                .tt1 {
                  margin-left: -23%; /* Adjust the negative value based on your preference */
                }
                .btn {
                  width: 100px;
                  height: 30px;
                  flex-shrink: 0;
                  border-radius: 5px;
                  background: #F00;
                  color: #FFF;
                  font-family: Inter;
                  font-size: 20px;
                  font-style: normal;
                  font-weight: 500;
                  line-height: normal;
                  margin-top: 3%;
                  margin-right: 3%;
                }
                
                .btnCancel {
                  margin-left: 3%; /* Adjust the margin-left value to your preference */
                }
                
                .line1{
                  width: 740px;
                  height: 1px;
                  background: #D9D9D9;
                  margin-left: 5%;
                  margin-top: 3%;
                }
            

                .nk {
                    display: flex;
                    width: 20rem;
                    height: auto;
        
                }
        
                .navigation {
                    display: flex;
                }
        
                .register {
                    width: 15rem;
                    height: 3rem;
                    margin-right: 2rem;
                    background-color: red;
                    font-size: 1.5rem;
                    border: none;
                    border-radius: 0.5rem;
                    cursor: pointer;
                    color: white;
                }
        
                .login {
                    width: 20rem;
                    height: 3rem;
                    background-color: red;
                    font-size: 1.5rem; 
                    border: none;
                    border-radius: 0.5rem;
                    cursor: pointer;
                    color: white;
                }
        
                .search-flight button {
                    padding: 5px 10px; /* ขนาดขอบของปุ่ม */
                    font-size: 16px; /* ขนาดตัวอักษร */
                    background-color: red; /* สีพื้นหลัง */
                    color: white; /* สีตัวอักษร */
                    border: none; /* ไม่มีเส้นขอบ */
                    margin-top: 5px;
                    margin-left: 800px;
                    border-radius: 5px; /* ขอบโค้ง */
                    cursor: pointer; /* เปลี่ยนเป็น cursor ที่บ่งบอกถึงการคลิกได้ */
                }
        
                body {
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    min-height: 100vh;
                    background-size: cover;
                    background-position: center;
                    background-image: url(https://cdn.discordapp.com/attachments/698939910131941466/1178039611847618560/image-2-bg.png?ex=6574b1e2&is=65623ce2&hm=1de53c58cde093b39cf114623ec535dec67794983860737b10a13a4a8fb1ea48&);
        
                }
        
                .box {
                    margin-top: 7rem;
                    width: 60rem;
                    height: 18.75rem;
                    background-color: #d9d9d9;
                    border: none;
                    border-radius: 1.5rem;
                    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
                }

                .select-type {
                    margin-top: 15px;
                    display: flex;
                    justify-content: space-between;
                }
        
                .datetable {
                    margin-left: 5px;
                }
        
                .select-type-trip {
                    border: none;
                    width: 200px;
                    height: 30px;
                    margin-left: 15px;
                    border-radius: 5px;
                    font-size: 16px;
                    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
                    
                }
        
                .select-type-class {
                    border: none;
                    width: 200px;
                    height: 30px;
                    margin-right: 20px;
                    margin-left: -5px;
                    margin-bottom: 50px;
                    border-radius: 5px;
                    font-size: 16px;
                    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        
                }
        
                .departure-airport {
                    font-size: 20px;
                    margin-left: 15px;
                }
        
                .select-departure-airport {
                    border: none;
                    width: 200px;
                    height: 30px;
                    border-radius: 5px;
                    font-size: 16px;
                    margin-left: 15px;
                    margin-bottom: 30px;
                    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
                }
                
                .select-arrival-airport {
                    border: none;
                    width: 200px;
                    height: 30px;
                    border-radius: 5px;
                    font-size: 16px;
                    margin-left: 50px;
                    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        
                }
        
                .bx.bx-calendar {
                    font-size: 25px;
                    margin-left: -20px;
                    border: none;
                    
                }
        
                .date {
                    margin-right: 250px;
                }
        
                label {
                    font-size: 20px;
        
                    & .datee {
                        margin-right: 5px;
                    }
                }
        
        
            </style>
</body>
</html>


